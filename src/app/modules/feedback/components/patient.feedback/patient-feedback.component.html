<ngx-spinner></ngx-spinner>
<!-- Rating Page -->
<div class="feedback-container" *ngIf="currentPage === 'rating'" @fadeIn>
  <div class="feedback-header">
    <h2 class="feedback-title">How Was Your Visit?</h2>
    <div class="title-underline"></div>
  </div>

  <!-- Hospitality Service -->
  <div class="service-card hospitality-service" [class.completed]="selectedHospitalityEmoji">
    <div class="service-header">
      <h3 class="service-title">
        Hospitality Service
        <div class="service-underline"></div>
      </h3>
    </div>
    <p class="service-description">
      How was your experience with our front desk, waiting area, and overall hospitality?
    </p>

    <div class="emoji-rating">
      <div class="emoji-item" *ngFor="let emoji of hospitalityEmojis" (click)="selectEmoji('hospitality', emoji)"
        [class.selected]="selectedHospitalityEmoji === emoji" [class.excellent]="emoji.label === 'Excellent'"
        [class.average]="emoji.label === 'Average'" [class.needs-improvement]="emoji.label === 'Needs Improvement'">
        <div class="emoji-face">
          <img [src]="emoji.image" [alt]="emoji.label" class="emoji-img">
        </div>
        <span class="emoji-label">{{ emoji.label }}</span>
      </div>
    </div>
  </div>

  <!-- Clinical Service -->
  <div class="service-card clinical-service" [class.completed]="selectedClinicalEmoji">
    <div class="service-header">
      <h3 class="service-title">
        Clinical Service
        <div class="service-underline"></div>
      </h3>
    </div>
    <p class="service-description">
      How was your experience with our medical staff, diagnosis, and treatment?
    </p>

    <div class="emoji-rating">
      <div class="emoji-item" *ngFor="let emoji of clinicalEmojis" (click)="selectEmoji('clinical', emoji)"
        [class.selected]="selectedClinicalEmoji === emoji" [class.excellent]="emoji.label === 'Excellent'"
        [class.average]="emoji.label === 'Average'" [class.needs-improvement]="emoji.label === 'Needs Improvement'">
        <div class="emoji-face">
          <img [src]="emoji.image" [alt]="emoji.label" class="emoji-img">
        </div>
        <span class="emoji-label">{{ emoji.label }}</span>
      </div>
    </div>
  </div>

</div>
<!-- Thanks Page -->
<div class="thanks-container" *ngIf="currentPage === 'thanks'" @slideIn>
  <div class="thanks-message">
    <h2>Thank You!</h2>
    <p>Your feedback has been submitted successfully.</p>
    <button (click)="goBack()">Go Back</button>
  </div>
</div>
<!-- Form Page -->
<div class="feedback-form-container" *ngIf="currentPage === 'form'" @slideIn>
  <div class="form-header">
    <button class="back-button" (click)="goBack()">
      ‚Üê Back
    </button>
    <h2>Share More Feedback</h2>
  </div>

  <form class="feedback-form" [formGroup]="feedbackForm" (submit)="submitFeedback()">
    <div class="form-group">
      <label for="firstName">First Name</label>
      <input type="text" id="firstName" name="firstName" formControlName="firstName"
        [ngClass]="{'is-invalid': feedbackForm.get('firstName')?.invalid && isClicked}">
    </div>
    <div *ngIf="feedbackForm.get('firstName')?.hasError('required') && isClicked" class="text-danger mx-1">
      Please provide us with your First Name
    </div>

    <div class="form-group">
      <label for="lastName">Last Name</label>
      <input type="text" id="lastName" name="lastName" formControlName="lastName"
        [ngClass]="{'is-invalid': feedbackForm.get('lastName')?.invalid && isClicked}">
    </div>
    <div *ngIf="feedbackForm.get('lastName')?.hasError('required') && isClicked" class="text-danger mx-1">
      Please provide us with your Last Name
    </div>
    <div class="form-group">
      <label for="comments">Your Feedback</label>
      <textarea id="comments" name="comments" rows="5" formControlName="comments"></textarea>
    </div>

    <button type="submit" class="form-submit-btn">Send Feedback</button>
  </form>
</div>