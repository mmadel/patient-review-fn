<ngx-spinner></ngx-spinner>
<!-- Rating Page -->
<div class="feedback-container" *ngIf="currentPage === 'rating' && !corrupttedData" @fadeIn>

  <div class="feedback-header">
    <h2 class="feedback-title">How Was Your Visit?</h2>
    <div class="title-underline"></div>
  </div>

  <!-- Hospitality Service -->
  <div class="service-card hospitality-service" [class.completed]="selectedHospitalityEmoji" id="hospitalityService">
    <div class="service-header">
      <h3 class="service-title">
        Hospitality Service
        <div class="service-underline"></div>
      </h3>
    </div>
    <p class="service-description">
      How was your experience with our front desk, waiting area, and overall hospitality?
    </p>

    <div class="emoji-rating">
      <div class="emoji-item" *ngFor="let emoji of hospitalityEmojis" (click)="selectEmoji('hospitality', emoji)"
        [class.selected]="selectedHospitalityEmoji === emoji" [class.excellent]="emoji.label === 'Excellent'"
        [class.average]="emoji.label === 'Average'" [class.needs-improvement]="emoji.label === 'Needs Improvement'">
        <div class="emoji-face">
          <img [src]="emoji.image" [alt]="emoji.label" class="emoji-img">
        </div>
        <span class="emoji-label">{{ emoji.label }}</span>
      </div>
    </div>
  </div>

  <!-- Clinical Service -->
  <div class="service-card clinical-service" [class.completed]="selectedClinicalEmoji" id="clinicalService">
    <div class="service-header">
      <h3 class="service-title">
        Clinical Service
        <div class="service-underline"></div>
      </h3>
    </div>
    <p class="service-description">
      How was your experience with our medical staff, diagnosis, and treatment?
    </p>

    <div class="emoji-rating">
      <div class="emoji-item" *ngFor="let emoji of clinicalEmojis" (click)="selectEmoji('clinical', emoji)"
        [class.selected]="selectedClinicalEmoji === emoji" [class.excellent]="emoji.label === 'Excellent'"
        [class.average]="emoji.label === 'Average'" [class.needs-improvement]="emoji.label === 'Needs Improvement'">
        <div class="emoji-face">
          <img [src]="emoji.image" [alt]="emoji.label" class="emoji-img">
        </div>
        <span class="emoji-label">{{ emoji.label }}</span>
      </div>
    </div>
  </div>
  <div id="feedbackForm" class="service-card personal-info-card form-scroll-target">
    <div class="form-content">
      <form class="feedback-form" [formGroup]="feedbackForm" (submit)="submitFeedback()">
        <div class="form-row">
          <div class="form-group">
            <label for="firstName">First Name</label>
            <input type="text" id="firstName" name="firstName" formControlName="firstName"
              [ngClass]="{'is-invalid': feedbackForm.get('firstName')?.invalid && isClicked}">
            <div *ngIf="feedbackForm.get('firstName')?.hasError('required') && isClicked" class="text-danger mx-1">
              First Name is required
            </div>
          </div>
          <div class="form-group">
            <label for="lastName">Last Name</label>
            <input type="text" id="lastName" name="lastName" formControlName="lastName"
              [ngClass]="{'is-invalid': feedbackForm.get('lastName')?.invalid && isClicked}">
            <div *ngIf="feedbackForm.get('lastName')?.hasError('required') && isClicked" class="text-danger mx-1">
              Last Name is required
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="comments">Your Feedback</label>
          <textarea id="comments" name="comments" rows="3" formControlName="comments"></textarea>
        </div>
        <button type="submit" class="form-submit-btn">Submit</button>
      </form>
    </div>
  </div>
</div>
<!-- Thanks Page -->
<div class="thanks-container" *ngIf="currentPage === 'thanks' && !corrupttedData" @slideIn>
  <div class="thanks-message">
    <h2>Thank You!</h2>
    <p>Your feedback has been submitted successfully.</p>
    <button (click)="goBack()">Start New Survey</button>
  </div>
</div>

 <div class="koko" *ngIf="corrupttedData" @slideIn>
  <div class="outer">
    <div class="dot"></div>
    <div class="card">
      <div class="ray"></div>
      <div class="text">Scan QR Code Again</div>
      <div class="line topl"></div>
      <div class="line leftl"></div>
      <div class="line bottoml"></div>
      <div class="line rightl"></div>
    </div>
  </div> 
</div>